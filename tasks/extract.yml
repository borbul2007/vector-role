---
- name: Extract Vector archive file 
  become: true
  become_user: root
  unarchive:
    src: "/opt/vector/vector-{{ vector_version }}-x86_64-unknown-linux-musl.tar.gz"
    dest: /opt/vector
    remote_src: yes

- name: store the files in the /tmp/foo directory in the 'out' variable
  find:
    paths: /opt/vector
    recurse: true
    use_regex: true
    patterns: (?i).*vector
  register: out

- debug:
    msg: "{{ item.path }}"
    with_items: "{{ out.files }}"
    when: out.matched > 0
    loop_control:
      label: "{{ item.path }}"

